# 트랜잭션
- 트랜잭션의 개념은 무엇인가?
- 트랜잭션의 ACID 속성이란 무엇일까?

<br>

## 개념
- 트랜잭션은 DB에서 **하나의 논리적 기능을 수행하기 위한 작업의 단위**이다.
- 쿼리의 관점에서 보았을 때는, 여러 개의 쿼리들을 **하나로 묶는 단위**를 가리킨다.

- **대용량 데이터 동기화** 등을 처리할 때, 데이터의 **정합성**을 보장하기 위한 기능이다.

- 논리적인 작업 단위를 문제없이 처리(`Commit`)하거나, 처리하지 못했을 경우에는 원상태로 복구(`Rollback`)해서 작업의 일부만 반영되는 오류를 방지한다. (`all-or-nothing`)

### 📌COMMIT
- 지금까지 작업한 내용을 영구적으로 DB에 반영시킨다.
- 트랜잭션을 종료한다.

### 📌ROLLBACK
- 지금까지 한 작업을 모두 취소하고 트랜잭션 시작 전 상태로 되돌린다.
- 트랜잭션을 종료한다.

### 📌AUTO COMMIT
- 각각의 쿼리에 자동으로 트랜잭션 처리를 해주는 개념.
- 쿼리가 성공하면 자동으로 커밋한다.
- 실행 중 문제가 생기면 자동으로 롤백한다.
  
<br>

## 트랜잭션의 상태

1. `Active` : 트랜잭션이 실행 중이며 동작 중인 상태.
2. `Partially Committed` : 트랜잭션이 실행되고 데이터 변경을 DB에 적용하기 전, **메모리 공간에만 임시 변경**해놓은 상태.
3. `Committed` : 트랜잭션이 정상적으로 완료 상태. 즉 실제로 메모리에서 DB에 데이터를 작성한 상태.  
4. `Failed` : 오류로 트랜잭션이 실패한 상태.
5. `Aborted` : 트랜잭션이 취소된 상태. 트랜잭션 실행 이전 데이터로 돌아간다.

<br>

## ACID 속성
1. 원자성 (**A**tomicity)
    - 트랜잭션 관련 일이 모두 수행되었거나 되지 않았거나를 보장하는 특징
    - all-or-nothing
    - 커밋 이전에는 디스크에 쓰지 않고, 메모리 버퍼에만 저장해 두었다가 중간에 작업에 실패하면 디스크에 반영하지 않는다.

2. 일관성 (**C**onsistency)
   - 트랜잭션이 완료된 다음의 상태에서도 트랜잭션이 일어나기 전의 상황과 동일하게 데이터의 일관성을 보장한다.

3. 격리성 (**I**solation)
   - 각각의 트랜잭션이 서로 간섭 없이 독립적으로 수행되는 성질.

4. 지속성 (**D**urability)
   - 성공적으로 수행된 트랜잭션은 **영구적으로** 데이터베이스에 작업의 결과가 저장되어야 한다.
   - 시스템 장애가 발생해도, 원래 상태로 복구하는 기능을 탑재한다.

<br>

### 출처
- https://hello-judy-world.tistory.com/195